<!DOCTYPE html>

<html lang="ja">

<head>
  <meta charset="utf-8">
  <title>HTML5 Canvas で Polygon(多角形)描画</title>
  <style>
    body {
      font-family: "Meiryo", "メイリオ", "ヒラギノ角ゴ Pro W3", sans-serif;
    }

    canvas {
      box-shadow: 0px 0px 4px 0px black;
    }
  </style>
  <script>
    window.onload = function () {
      var canvas = document.getElementById("c");
      var context = canvas.getContext("2d");
      var radius = 50;
      // var draw = function () {
      //   for (var i = 0; i < 10; ++i) {

      //     context.fillStyle = context.strokeStyle = "hsl(" + 360 / 10 * i + ", 75%, 50%)";
      //     var x = (i % 5) * 120 + 20 + radius;
      //     var y = Math.floor(i / 5) * 120 + 15 + radius;
      //     // ポリゴンをストローク描画
      //     strokePolygon(context, x, y, radius, i + 3, 270);
      //     // ポリゴンを塗りつぶし描画
      //     fillPolygon(context, x, y + 240, radius, i + 3, 270);
      //   }
      // };
      // draw();
      // ポリゴンをストローク描画
      strokePolygon(context, 130, 130, radius, 5, 270);
    };
  </script>
</head>

<body>
  <h2>HTML5 Canvas で Polygon(多角形)描画</h2>
  <canvas id="c" width=640 height=480></canvas>
</body>

<script>
  /**
   * @author phi
   */

  (function (np) {

    np = np || window;

    /**
     * ポリゴンパスセット
     * @param   {CanvasRenderingContext2D}  ctx 描画先コンテキスト
     * @param   {Number}    x 値
     * @param   {Number}    y 値
     * @param   {Number}    radius  半径
     * @param   {Number}    sides   辺の数
     * @param   {Number}    offsetAngle 角度(省略時は270°)
     */
    np.polygon = function (ctx, x, y, radius, sides, offsetAngle) {
      // 内角
      var radDiv = (Math.PI * 2) / sides;
      // 回転オフセット(省略時は270°)
      var radOffset = (offsetAngle != undefined) ? offsetAngle * Math.PI / 180 : -Math.PI / 2;

      // パス描画
      ctx.moveTo(x + Math.cos(radOffset) * radius, y + Math.sin(radOffset) * radius);
      for (var i = 1; i < sides; ++i) {
        var rad = radDiv * i + radOffset;
        ctx.lineTo(
          x + Math.cos(rad) * radius,
          y + Math.sin(rad) * radius
        );
      }
      ctx.closePath();
    };

    /**
     * ポリゴンパス塗りつぶし描画
     * @param   {CanvasRenderingContext2D}  ctx 描画先コンテキスト
     * @param   {Number}    x 値
     * @param   {Number}    y 値
     * @param   {Number}    radius  半径
     * @param   {Number}    sides   辺の数
     * @param   {Number}    offsetAngle 角度(省略時は270°)
     */
    np.fillPolygon = function (ctx, x, y, radius, sides, offsetAngle) {
      ctx.beginPath();
      polygon(ctx, x, y, radius, sides, offsetAngle);
      ctx.fill();
    };

    /**
     * ポリゴンパスストローク描画
     * @param   {CanvasRenderingContext2D}  ctx 描画先コンテキスト
     * @param   {Number}    x 値
     * @param   {Number}    y 値
     * @param   {Number}    radius  半径
     * @param   {Number}    sides   辺の数
     * @param   {Number}    offsetAngle 角度(degree, 省略時は270°)
     */
    np.strokePolygon = function (ctx, x, y, radius, sides, offsetAngle) {
      ctx.beginPath();
      polygon(ctx, x, y, radius, sides, offsetAngle);
      ctx.stroke();
    };

  })();
</script>

</html>